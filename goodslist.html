<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="./bootstrap.css">
</head>

<body>
  <div class="container">
    <h2>商品列表</h2>
    <table class="table table-bordered table-striped table-hover">
      <thead>
        <tr>
          <th>序号</th>
          <th>商品名称</th>
          <th>商品价格</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>iphone6s</td>
          <td>6000</td>
          <td><button class="btn btn-primary" onclick="addCar(this)">加入购物车</button></td>
        </tr>
        <tr>
          <td>2</td>
          <td>华为p30</td>
          <td>7000</td>
          <td><button class="btn btn-primary" onclick="addCar(this)">加入购物车</button></td>
        </tr>
        <tr>
          <td>3</td>
          <td>小米2s</td>
          <td>1800</td>
          <td><button class="btn btn-primary" onclick="addCar(this)">加入购物车</button></td>
        </tr>
        <tr>
          <td>4</td>
          <td>三星s4</td>
          <td>4500</td>
          <td><button class="btn btn-primary" onclick="addCar(this)">加入购物车</button></td>
        </tr>
      </tbody>
    </table>
    <p>
      <a href="./carlist.html"><button class="btn btn-danger">查看购物车</button></a>
    </p>
  </div>

</body>
<script src="./car.js"></script>
<script>
  //本地存储存商品的格式：[{"id":1,"price":100,"number":2},{},{},..] 
  //加入购物车
  function addCar(ele){
    console.log(ele); //是当前标签的DOM对象
    //需要获取商品的id和名称和价格
    var tr = ele.parentElement.parentElement;
    var children = tr.children; // [td,td,td,td]
    var id = children[0].innerText;
    var title = children[1].innerText;
    var price = children[2].innerText;
    var number = 1;
    //商品加入购物车
    var goods = {"id":id,"title":title,"price":price,"number":1};
    var car = new Car();
    car.addCar(goods); //加入购物车
  }

</script>

</html>